<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Dashboard - Club Run</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="ui-agent.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-icon">üéâ</div>
                <h1>Club Run</h1>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="agent-dashboard.html" class="nav-link active">Agent Dashboard</a>
                <a href="index.html#features" class="nav-link">Features</a>
                <a href="index.html#contact" class="nav-link">Contact</a>
            </div>
            <div class="nav-auth">
                <button class="btn-login" onclick="openAuthModal()">Sign In</button>
                <button class="btn-signup" onclick="openAuthModal('signup')">Sign Up</button>
                <button class="btn-launch-dashboard" onclick="window.location.href='index.html'">
                    <span class="home-icon">üè†</span>
                    Back to Home
                </button>
            </div>
            <div class="nav-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Agent Dashboard Header -->
    <section class="agent-dashboard-hero">
        <div class="container">
            <div class="agent-dashboard-header">
                <div class="agent-dashboard-title">
                    <h1>Agent Dashboard</h1>
                    <p>Your AI agents are working to optimize your nightlife operations</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Agent Dashboard Content -->
    <section class="agent-dashboard-content">
        <div class="container">
            <!-- AI Agents Grid -->
            <div class="agent-grid">
                <!-- Research Agent -->
                <div class="agent-card" data-agent="researchAgent" data-feature="venueResearch">
                    <div class="agent-header">
                        <div class="agent-icon research-icon">üîç</div>
                        <div class="agent-status active">ACTIVE</div>
                    </div>
                    <div class="agent-info">
                        <h3>Research Agent</h3>
                        <div class="agent-efficiency">
                            <span class="efficiency-label">Efficiency:</span>
                            <span class="efficiency-value">85%</span>
                        </div>
                        <p class="agent-description">Analyzing venue crowd reports</p>
                    </div>
                    <div class="agent-update">
                        <div class="update-box research-update">
                            <div class="update-border research-border"></div>
                            <p>529 Bar trending up - expect higher crowd tonight.</p>
                        </div>
                    </div>
                </div>

                <!-- Budget Agent -->
                <div class="agent-card" data-agent="budgetAgent" data-feature="expenseTracking">
                    <div class="agent-header">
                        <div class="agent-icon budget-icon">üí∞</div>
                        <div class="agent-status active">ACTIVE</div>
                    </div>
                    <div class="agent-info">
                        <h3>Budget Agent</h3>
                        <div class="agent-efficiency">
                            <span class="efficiency-label">Efficiency:</span>
                            <span class="efficiency-value">99%</span>
                        </div>
                        <p class="agent-description">Tracking weekly expenses</p>
                    </div>
                    <div class="agent-update">
                        <div class="update-box budget-update">
                            <div class="update-border budget-border"></div>
                            <p>$15 under budget this week - great job!</p>
                        </div>
                    </div>
                </div>

                <!-- Reporting Agent -->
                <div class="agent-card" data-agent="reportingAgent" data-feature="performanceMetrics">
                    <div class="agent-header">
                        <div class="agent-icon reporting-icon">üìä</div>
                        <div class="agent-status active">ACTIVE</div>
                    </div>
                    <div class="agent-info">
                        <h3>Reporting Agent</h3>
                        <div class="agent-efficiency">
                            <span class="efficiency-label">Efficiency:</span>
                            <span class="efficiency-value">98%</span>
                        </div>
                        <p class="agent-description">Processing check-in verifications</p>
                    </div>
                    <div class="agent-update">
                        <div class="update-box reporting-update">
                            <div class="update-border reporting-border"></div>
                            <p>All recent check-ins verified successfully.</p>
                        </div>
                    </div>
                </div>

                <!-- UI Agent will be dynamically added here by ui-agent.js -->
            </div>

            <!-- Quick Actions Section -->
            <div class="quick-actions-section">
                <h2>Quick Actions</h2>
                <div class="quick-actions-grid">
                    <!-- Quick actions will be dynamically generated based on role -->
                </div>
            </div>

            <!-- Role-Specific Features Section -->
            <div class="role-features-section" style="display: none;">
                <h2>Role-Specific Features</h2>
                <div class="role-features-grid">
                    <!-- Runner Features -->
                    <div class="role-feature" data-role="runner" data-feature="venueResearch">
                        <h3>üè¢ Venue Research</h3>
                        <p>Advanced venue analysis and crowd intelligence</p>
                    </div>
                    <div class="role-feature" data-role="runner" data-feature="expenseTracking">
                        <h3>üí∞ Expense Tracking</h3>
                        <p>Real-time expense monitoring and optimization</p>
                    </div>
                    <div class="role-feature" data-role="runner" data-feature="routeOptimization">
                        <h3>üó∫Ô∏è Route Optimization</h3>
                        <p>Efficient route planning for venue visits</p>
                    </div>

                    <!-- Client Features -->
                    <div class="role-feature" data-role="client" data-feature="bookingAnalytics">
                        <h3>üìÖ Booking Analytics</h3>
                        <p>Comprehensive booking analysis and insights</p>
                    </div>
                    <div class="role-feature" data-role="client" data-feature="preferenceAnalysis">
                        <h3>‚≠ê Preference Analysis</h3>
                        <p>Service preference tracking and optimization</p>
                    </div>
                    <div class="role-feature" data-role="client" data-feature="serviceOptimization">
                        <h3>üéØ Service Optimization</h3>
                        <p>Personalized service recommendations</p>
                    </div>

                    <!-- Operations Features -->
                    <div class="role-feature" data-role="operations" data-feature="staffManagement">
                        <h3>üë• Staff Management</h3>
                        <p>Staff scheduling and performance tracking</p>
                    </div>
                    <div class="role-feature" data-role="operations" data-feature="inventoryTracking">
                        <h3>üì¶ Inventory Tracking</h3>
                        <p>Real-time inventory management and alerts</p>
                    </div>
                    <div class="role-feature" data-role="operations" data-feature="performanceMetrics">
                        <h3>üìà Performance Metrics</h3>
                        <p>Comprehensive operational performance analysis</p>
                    </div>
                </div>
            </div>

            <!-- UI Agent Settings Panel -->
            <div class="ui-settings-panel" id="uiSettingsPanel" style="display: none;">
                <div class="settings-header">
                    <h3>üé® UI Agent Settings</h3>
                    <button class="close-btn" onclick="closeUISettings()">√ó</button>
                </div>
                <div class="settings-content">
                    <div class="setting-group">
                        <label>Role:</label>
                        <select id="roleSelect" onchange="uiAgent.setUserRole(this.value)">
                            <option value="runner">üèÉ Runner</option>
                            <option value="client">üëë Client</option>
                            <option value="operations">‚öôÔ∏è Operations</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label>Theme:</label>
                        <select id="themeSelect" onchange="uiAgent.setTheme(this.value)">
                            <option value="auto">Auto (Time-based)</option>
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label>Layout:</label>
                        <select id="layoutSelect" onchange="uiAgent.setLayout(this.value)">
                            <option value="default">Default</option>
                            <option value="compact">Compact</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="animationsCheck" onchange="uiAgent.setAnimations(this.checked)">
                            Enable Animations
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="accessibilityCheck" onchange="uiAgent.setAccessibility(this.checked)">
                            High Contrast Mode
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chat Widget -->
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header" onclick="toggleChat()">
            <div class="chat-title">
                <span class="chat-icon">ü§ñ</span>
                <span>AI Copilot</span>
            </div>
            <div class="chat-status">Online</div>
        </div>
        <div class="chat-body" id="chatBody" style="display: none;">
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    <div class="message-content">
                        Hello! I'm your AI copilot. How can I help you with your nightlife operations today?
                    </div>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
                <button onclick="sendChatMessage()">Send</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="ui-agent.js"></script>
    <script src="agent-dashboard.js"></script>
    <script>
        // Quick action handler (now handled by UI Agent)
        function performQuickAction(action) {
            if (window.uiAgent) {
                uiAgent.handleQuickAction(action);
            } else {
                showNotification('UI Agent not initialized', 'error');
            }
        }

        // UI Settings functions
        function openUISettings() {
            const panel = document.getElementById('uiSettingsPanel');
            panel.style.display = 'block';
            
            // Set current values
            if (window.uiAgent) {
                document.getElementById('roleSelect').value = uiAgent.currentRole;
                document.getElementById('themeSelect').value = uiAgent.userPreferences.theme;
                document.getElementById('layoutSelect').value = uiAgent.userPreferences.layout;
                document.getElementById('animationsCheck').checked = uiAgent.userPreferences.animations;
                document.getElementById('accessibilityCheck').checked = uiAgent.userPreferences.accessibility;
            }
        }

        function closeUISettings() {
            document.getElementById('uiSettingsPanel').style.display = 'none';
        }

        // Chat functions
        function toggleChat() {
            const chatBody = document.getElementById('chatBody');
            chatBody.style.display = chatBody.style.display === 'none' ? 'block' : 'none';
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addChatMessage(message, 'user');
                input.value = '';
                
                // Role-specific AI responses
                const role = window.uiAgent ? uiAgent.currentRole : 'runner';
                const roleResponses = {
                    runner: [
                        "I'll help you optimize your venue operations and expense tracking.",
                        "Let me analyze the latest venue crowd reports for you.",
                        "I can help you plan the most efficient route for your venue visits."
                    ],
                    client: [
                        "I'll help you optimize your booking preferences and service experience.",
                        "Let me analyze your service preferences and suggest improvements.",
                        "I can help you track your booking analytics and performance."
                    ],
                    operations: [
                        "I'll help you manage staff performance and inventory tracking.",
                        "Let me provide you with comprehensive operational metrics.",
                        "I can help you optimize your overall business performance."
                    ]
                };
                
                const responses = roleResponses[role] || roleResponses.runner;
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                setTimeout(() => {
                    addChatMessage(randomResponse, 'bot');
                }, 1000);
            }
        }

        function addChatMessage(message, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            messageDiv.innerHTML = `<div class="message-content">${message}</div>`;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        // Notification function
        function showNotification(message, type = 'info') {
            Toastify({
                text: message,
                duration: 3000,
                gravity: "top",
                position: "right",
                backgroundColor: type === 'info' ? "#8b5cf6" : "#ef4444",
                stopOnFocus: true
            }).showToast();
        }

        // Role-specific feature display
        function showRoleFeatures(role) {
            const featuresSection = document.querySelector('.role-features-section');
            const features = document.querySelectorAll('.role-feature');
            
            if (featuresSection) {
                featuresSection.style.display = 'block';
                
                features.forEach(feature => {
                    if (feature.dataset.role === role) {
                        feature.style.display = 'block';
                    } else {
                        feature.style.display = 'none';
                    }
                });
            }
        }

        // Initialize role features when UI Agent is ready
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (window.uiAgent) {
                    showRoleFeatures(uiAgent.currentRole);
                }
            }, 1000);
        });
    </script>
</body>
</html>